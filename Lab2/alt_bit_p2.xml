<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
int rack[2];
int sack[2];
int r[2];
int s[2];
int count[2];
chan acking;
chan sending;</declaration><template><name x="5" y="5">Sender</name><declaration>// Place local declarations here.
clock c;</declaration><location id="id0" x="232" y="-200"></location><location id="id1" x="-256" y="-72"></location><location id="id2" x="216" y="-24"><name x="206" y="-54">Mode1</name></location><location id="id3" x="-16" y="-120"><name x="0" y="-72">Mode0</name></location><init ref="id1"/><transition><source ref="id0"/><target ref="id0"/><label kind="assignment" x="312" y="-224">s[1]=1</label><nail x="312" y="-200"/><nail x="248" y="-248"/></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="360" y="-128">rack[1]==0</label><label kind="assignment" x="360" y="-112">count[0]= count[0] +1</label><nail x="320" y="-80"/><nail x="288" y="-112"/></transition><transition><source ref="id0"/><target ref="id2"/><label kind="synchronisation" x="164" y="-127">sending?</label><label kind="assignment" x="164" y="-112">s[1]=1, c=0, count[0]=0</label><nail x="176" y="-112"/></transition><transition><source ref="id3"/><target ref="id0"/><label kind="guard" x="24" y="-160">rack[0]==1</label><label kind="assignment" x="16" y="-144">c=0,rack[0]=0</label></transition><transition><source ref="id3"/><target ref="id3"/><label kind="guard" x="32" y="24">rack[0]==0</label><label kind="assignment" x="24" y="40">count[0]=count[0] +1</label><nail x="40" y="24"/><nail x="88" y="0"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="assignment" x="-344" y="-160">s[0]=1</label><nail x="-280" y="-136"/><nail x="-328" y="-104"/></transition><transition><source ref="id2"/><target ref="id1"/><label kind="guard" x="-88" y="160">rack[1]==1</label><label kind="assignment" x="-88" y="184">c=0,rack[1]=0</label><nail x="-56" y="152"/></transition><transition><source ref="id1"/><target ref="id3"/><label kind="synchronisation" x="-160" y="-168">sending?</label><label kind="assignment" x="-160" y="-152">s[0]=1, c =0, count[0] =0</label><nail x="-96" y="-104"/></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="360" y="-64">count[0]&gt;5</label><label kind="assignment" x="360" y="-40">s[1]=1</label><nail x="344" y="-8"/><nail x="336" y="-64"/></transition><transition><source ref="id3"/><target ref="id3"/><label kind="guard" x="-192" y="-48">count[0]&gt;5</label><label kind="assignment" x="-184" y="-24">s[0]=1</label><nail x="-112" y="0"/><nail x="-136" y="-40"/></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="232" y="72">rack[0] == 1</label><label kind="synchronisation" x="248" y="120">sending?</label><label kind="assignment" x="248" y="96">s[1]=1</label><nail x="360" y="8"/><nail x="288" y="64"/></transition><transition><source ref="id3"/><target ref="id3"/><label kind="guard" x="-80" y="56">rack[1] == 1</label><label kind="synchronisation" x="-80" y="88">sending?</label><label kind="assignment" x="-80" y="72">s[0]= 1</label><nail x="0" y="48"/><nail x="-80" y="8"/></transition></template><template><name>Reciever</name><declaration>clock c;</declaration><location id="id4" x="144" y="-80"></location><location id="id5" x="-56" y="-80"></location><init ref="id5"/><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="240" y="-88">r[1]==0</label><label kind="assignment" x="240" y="-64">count[1]=count[1]+1</label><nail x="232" y="-96"/><nail x="232" y="-48"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="-312" y="-96">r[0]==0</label><label kind="assignment" x="-312" y="-80">count[1]=count[1]+1</label><nail x="-160" y="-112"/><nail x="-152" y="-56"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="152" y="-24">r[0]==1</label><label kind="synchronisation" x="152" y="-8">acking?</label><label kind="assignment" x="152" y="8">sack[0]=1</label><nail x="200" y="-40"/><nail x="144" y="-16"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="224" y="-176">count[1]&gt;5</label><label kind="assignment" x="224" y="-160">sack[0] = 1</label><nail x="224" y="-136"/><nail x="264" y="-120"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="guard" x="-8" y="32">r[1] == 1</label><label kind="assignment" x="-8" y="48">sack[1] = 1, c=0, count[1]=0, sack[0]=0</label><nail x="64" y="-40"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="guard" x="8" y="-184">r[0]==1</label><label kind="assignment" x="8" y="-160">sack[0] =1, c=0, count[1]=0, sack[1]=0</label><nail x="40" y="-120"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="-96" y="0">r[1]==1</label><label kind="synchronisation" x="-96" y="24">acking?</label><label kind="assignment" x="-96" y="48">sack[1]=1</label><nail x="-48" y="-8"/><nail x="-104" y="0"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="-120" y="-200">count[1]&gt;5</label><label kind="assignment" x="-120" y="-176">sack[1] =1</label><nail x="-64" y="-160"/><nail x="-104" y="-136"/></transition></template><template><name>Link</name><declaration>clock c;</declaration><location id="id6" x="0" y="0"></location><init ref="id6"/><transition><source ref="id6"/><target ref="id6"/><label kind="guard" x="-272" y="-48">sack[1] == 1</label><label kind="synchronisation" x="-272" y="-32">acking!</label><label kind="assignment" x="-272" y="-16">rack[1] =1, r[1]=0, s[1]=0</label><nail x="-76" y="-8"/><nail x="-68" y="-48"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="guard" x="-40" y="88">sack[0] == 1</label><label kind="synchronisation" x="-40" y="104">acking!</label><label kind="assignment" x="-40" y="120">rack[0] = 1, r[0]=0, s[0]=0</label><nail x="-8" y="80"/><nail x="-56" y="80"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="guard" x="128" y="-16">s[1] == 1</label><label kind="synchronisation" x="128" y="0">sending!</label><label kind="assignment" x="128" y="16">r[1]=1</label><nail x="88" y="-8"/><nail x="104" y="-8"/><nail x="80" y="32"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="guard" x="16" y="-144">s[0] == 1</label><label kind="synchronisation" x="16" y="-128">sending!</label><label kind="assignment" x="16" y="-112">r[0]=1</label><nail x="56" y="-64"/><nail x="8" y="-88"/></transition></template><system>
system Sender, Reciever, Link;</system></nta>