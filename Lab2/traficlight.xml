<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>int light = 0;
chan direction[2];
bool event = false;
int id;</declaration><template><name x="5" y="5">Lights</name><parameter>const int i, const int dir</parameter><declaration>// Place local declarations here.
clock x;

</declaration><location id="id0" x="232" y="136"><name x="222" y="106">driving</name></location><location id="id1" x="424" y="-72"><name x="414" y="-102">wait</name></location><location id="id2" x="-128" y="-72"><name x="-138" y="-102">No_car</name><label kind="invariant" x="-138" y="-57">id = i</label></location><init ref="id2"/><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="172" y="106">id == i and light == i and event == true</label><nail x="208" y="200"/><nail x="296" y="192"/></transition><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="188" y="-6">light == i and event == true and id==i</label><nail x="136" y="32"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="188" y="-6">light == i and id == i</label><label kind="synchronisation" x="268" y="17">direction[dir]?</label></transition><transition><source ref="id0"/><target ref="id2"/><label kind="guard" x="92" y="-10">light != i and id == i</label><label kind="assignment" x="-8" y="32">id = 0</label><nail x="40" y="72"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="guard" x="364" y="-102">light == 0</label><nail x="480" y="-104"/><nail x="432" y="-120"/></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="-188" y="-102">event == false and id ==i</label><nail x="-168" y="-128"/><nail x="-192" y="-88"/></transition><transition><source ref="id2"/><target ref="id1"/><label kind="guard" x="52" y="-66">event == true and id == i</label><nail x="104" y="-96"/></transition></template><template><name>Controller</name><declaration>clock timer;</declaration><location id="id3" x="16" y="152"><name x="6" y="122">W/E_green</name></location><location id="id4" x="336" y="-216"><name x="326" y="-246">N/S_green</name></location><location id="id5" x="-224" y="-88"><name x="-234" y="-118">All_red</name></location><init ref="id5"/><transition><source ref="id4"/><target ref="id4"/><nail x="496" y="-208"/><nail x="432" y="-288"/></transition><transition><source ref="id5"/><target ref="id3"/><label kind="guard" x="-164" y="2">id == 3 or id == 4</label><label kind="assignment" x="-164" y="32">light = 2</label><nail x="-40" y="-32"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="guard" x="-116" y="-230">id == 0</label><label kind="synchronisation" x="-8" y="-416">direction[0]!</label><label kind="assignment" x="-4" y="-152">light = 0</label><nail x="152" y="-392"/><nail x="-48" y="-384"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="-364" y="-150">event == false</label><nail x="-328" y="-208"/><nail x="-368" y="-176"/></transition><transition><source ref="id3"/><target ref="id5"/><label kind="guard" x="-164" y="2">id == 0</label><label kind="assignment" x="-164" y="32">light = 0</label></transition><transition><source ref="id4"/><target ref="id3"/><label kind="guard" x="116" y="-62">id == 3 or id == 4</label><label kind="assignment" x="116" y="-32">light = 2</label></transition><transition><source ref="id5"/><target ref="id4"/><label kind="guard" x="-60" y="-142">id==1 or id==2</label><label kind="assignment" x="-4" y="-152">light = 1</label></transition></template><template><name>Generator</name><location id="id6" x="-144" y="184"></location><location id="id7" x="280" y="184"></location><location id="id8" x="256" y="-48"></location><location id="id9" x="-136" y="-40"></location><init ref="id9"/><transition><source ref="id6"/><target ref="id9"/></transition><transition><source ref="id7"/><target ref="id6"/></transition><transition><source ref="id8"/><target ref="id7"/></transition><transition><source ref="id9"/><target ref="id8"/></transition></template><system>NS = Lights(1, 0);
SN = Lights(2, 0);
EW = Lights(3, 1);
WE = Lights(4, 1);

system NS, SN, EW, WE, Controller, Generator;</system></nta>